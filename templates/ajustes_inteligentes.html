{% extends "base.html" %}

{% block conteudo %}
<div class="container mt-4" style="font-family: 'Poppins', sans-serif;">
  <h3 class="mb-4">üß† Reclassifica√ß√£o Inteligente de Lan√ßamentos</h3>
    {% if request.args.get('atualizado') %}
  <div class="alert alert-success shadow-sm rounded-3 px-4 py-3" role="alert">
    ‚úÖ Classifica√ß√µes atualizadas com sucesso!
  </div>
{% endif %}


  <form method="POST" action="/atualizar-classificacoes">
    <div class="table-responsive">
      <table class="table table-bordered align-middle table-striped table-hover">
        <thead class="table-dark">
          <tr>
            <th>Lan√ßamento</th>
            <th>Categoria</th>
            <th>Centro de Custo</th>
            <th>Tipo</th>
          </tr>
        </thead>
        <tbody>
          {% for item in classificacoes %}
          <tr>
            <td>
              <strong>{{ item.nome }}</strong>
              <input type="hidden" name="nomes[]" value="{{ item.nome }}">
            </td>
            <td>
              <select name="categorias[]" class="form-select form-select-sm">
                <option value="">-- Escolher --</option>
                {% for c in categorias %}
                <option value="{{ c }}" {% if item.categoria == c %}selected{% endif %}>{{ c }}</option>
                {% endfor %}
              </select>
            </td>
            <td>
              <select name="centros[]" class="form-select form-select-sm">
                <option value="">-- Escolher --</option>
                {% for centro in centros %}
                <option value="{{ centro }}" {% if item.centro == centro %}selected{% endif %}>{{ centro }}</option>
                {% endfor %}
              </select>
            </td>
            <td>
              <select name="tipos[]" class="form-select form-select-sm">
                <option value="">-- Escolher --</option>
                <option value="Fixo" {% if item.tipo == 'Fixo' %}selected{% endif %}>Fixo</option>
                <option value="Vari√°vel" {% if item.tipo == 'Vari√°vel' %}selected{% endif %}>Vari√°vel</option>
              </select>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="text-end mt-4">
      <button type="submit" class="btn btn-success px-4 py-2 shadow-sm">üíæ Aplicar Reclassifica√ß√£o</button>
    </div>
  </form>
</div>
{% endblock %}
