<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Indicadores Financeiros</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 30px;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .card {
            flex: 1 1 250px;
            background: white;
            border-left: 6px solid #00B894;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .card.red { border-color: #d63031; }
        .card.blue { border-color: #0984e3; }
        .card.yellow { border-color: #fdcb6e; }
        .card.green { border-color: #00b894; }
        .card h3 {
            margin-top: 0;
            font-size: 16px;
            color: #636e72;
        }
        .card p {
            font-size: 24px;
            font-weight: bold;
            margin: 5px 0 0;
        }
    </style>
</head>
<body>
    <h2>📊 Indicadores Financeiros</h2>
    <<div class="container">
    <div class="card blue">
        <h3>💸 Total Previsto no Mês</h3>
        <p>{{ total_previsto }}</p>
    </div>
    <div class="card blue">
        <h3>✅ Total Pago no Mês</h3>
        <p>{{ total_pago }}</p>
    </div>
    <div class="card blue">
        <h3>📊 Saldo do Mês</h3>
        <p>{{ saldo }}</p>
    </div>
    <div class="card red">
        <h3><a href="/indicadores?filtro=atrasadas" style="text-decoration:none; color:inherit;">❌ Contas Vencidas</a></h3>
        <p>{{ vencidas }}</p>
    </div>
    <div class="card blue">
        <h3><a href="/indicadores?filtro=hoje" style="text-decoration:none; color:inherit;">📅 A Pagar Hoje</a></h3>
        <p>{{ a_vencer }}</p>
    </div>
</div>

</body>
</html>
<h2 style="margin-top:40px; text-align: left; font-size: 22px; color: #2c3e50;">
    📋 {{ titulo_lancamentos }}
    {% if request.args.get('filtro') %}
        <a href="/indicadores" style="margin-left:20px; font-size: 14px; color: #2980b9; text-decoration: none;">← Voltar para visão geral</a>
    {% endif %}
</h2>

{% if lancamentos %}
    <!-- Cabeçalho fixo -->
    <div style="
        display: grid;
        grid-template-columns: 300px 160px 180px 180px 110px 110px 110px 100px;
        font-weight: bold;
        background-color: #f0f2f5;
        padding: 12px 15px;
        border-radius: 8px;
        font-family: 'Segoe UI', sans-serif;
        font-size: 14px;
        border: 1px solid #dcdde1;
    ">
        <div>Fornecedor</div>
        <div>Categoria</div>
        <div>Plano de Contas</div>
        <div>Centro de Custo</div>
        <div>Vencimento</div>
        <div>Previsto</div>
        <div>Pago</div>
        <div>Status</div>
    </div>

    <!-- Lista de lançamentos -->
    {% for v, c, f, p, val, pago in lancamentos %}
        <div style="
            display: grid;
            grid-template-columns: 400px 160px 180px 180px 110px 110px 110px 100px;
            background-color: #f9f9f9;
            padding: 10px 15px;
            border-radius: 6px;
            margin-top: 6px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.03);
            font-family: 'Segoe UI', sans-serif;
            font-size: 14px;
            border: 1px solid #ecf0f1;
        ">
            <div>{{ f }}</div>
            <div>{{ c }}</div>
            <div>{{ p }}</div>
            <div>–</div>
            <div>{{ v }}</div>
            <div>{{ 'R$ {:,.2f}'.format(val).replace(',', 'v').replace('.', ',').replace('v', '.') }}</div>
            <div style="color:#27ae60;">{{ 'R$ {:,.2f}'.format(pago).replace(',', 'v').replace('.', ',').replace('v', '.') }}</div>
            <div>
                {% if pago > 0 %}
                    <span style="color:green;">Pago</span>
                {% elif val > 0 and datetime.strptime(v, "%d/%m/%Y").date() < now().date() %}
                    <span style="color:red;">Vencido</span>
                {% else %}
                    <span style="color:orange;">Aberto</span>
                {% endif %}
            </div>
        </div>
    {% endfor %}
{% else %}
    <p style="margin-top:20px;">Nenhum lançamento encontrado.</p>
{% endif %}





